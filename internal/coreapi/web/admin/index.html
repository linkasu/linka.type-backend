<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Админ-панель — LINKa Type API</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Commissioner:wght@300;400;500;600;700&family=Literata:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/styles.css">
</head>
<body>
  <div class="background">
    <div class="blob blob-one"></div>
    <div class="blob blob-two"></div>
    <div class="blob blob-three"></div>
  </div>

  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="/">LINKa Type API</a>
      <div class="nav-links">
        <a href="/client.md">Гайд интеграции</a>
        <a href="/AGENTS.md">AGENTS</a>
        <a href="/">Главная</a>
      </div>
    </div>
  </nav>

  <section class="section">
    <div class="container">
      <div class="admin-shell">
        <div class="row g-4">
          <div class="col-lg-4">
            <h1 class="h3 fw-semibold">Админ-панель</h1>
            <p class="text-muted">
              Вход через Firebase Auth. Введите email и пароль администратора.
            </p>
          </div>
          <div class="col-lg-8">
            <div id="login-panel" class="glass">
              <h2 class="h4 fw-semibold">Вход</h2>
              <p class="text-muted">Войдите с учетными данными администратора.</p>
              <div class="field">
                <label>Email</label>
                <input id="login-email" class="form-control" type="email" placeholder="admin@example.com">
              </div>
              <div class="field">
                <label>Пароль</label>
                <input id="login-password" class="form-control" type="password" placeholder="••••••••">
              </div>
              <button id="login-btn" class="btn btn-primary">Войти</button>
              <div id="login-message" class="mt-3 text-muted"></div>
            </div>

            <div id="admin-panel" class="d-none">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h2 class="h4 fw-semibold mb-0">Управление сервисом</h2>
                <button id="logout" class="btn btn-ghost btn-sm">Выйти</button>
              </div>

              <div class="row g-3">
                <div class="col-md-4">
                  <div class="glass h-100">
                    <div class="text-muted">Пользователей</div>
                    <div id="stat-users" class="display-6 fw-semibold">—</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="glass h-100">
                    <div class="text-muted">Категорий</div>
                    <div id="stat-categories" class="display-6 fw-semibold">—</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="glass h-100">
                    <div class="text-muted">Фраз</div>
                    <div id="stat-statements" class="display-6 fw-semibold">—</div>
                    <select id="stat-window-select" class="form-select mt-2">
                      <option value="24h" selected>24 часа</option>
                      <option value="168h">7 дней</option>
                      <option value="720h">30 дней</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="glass mt-4">
                <div class="d-flex justify-content-between align-items-center">
                  <h3 class="h5 fw-semibold mb-0">Глобальные категории</h3>
                  <button id="refresh-global-categories" class="btn btn-ghost btn-sm">Обновить</button>
                </div>
                <div class="mt-3">
                  <button id="create-global-category" class="btn btn-primary btn-sm">Создать категорию</button>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-sm align-middle">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Название</th>
                        <th>По умолчанию</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="global-categories-table"></tbody>
                  </table>
                </div>
              </div>

              <div class="glass mt-4">
                <div class="d-flex justify-content-between align-items-center">
                  <h3 class="h5 fw-semibold mb-0">Вопросы онбординга</h3>
                  <button id="refresh-questions" class="btn btn-ghost btn-sm">Обновить</button>
                </div>
                <div class="mt-3">
                  <button id="create-question" class="btn btn-primary btn-sm">Создать вопрос</button>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-sm align-middle">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Название</th>
                        <th>Категория</th>
                        <th>Тип</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="questions-table"></tbody>
                  </table>
                </div>
              </div>

              <div class="glass mt-4">
                <div class="d-flex justify-content-between align-items-center">
                  <h3 class="h5 fw-semibold mb-0">Администраторы</h3>
                  <button id="refresh-admins" class="btn btn-ghost btn-sm">Обновить</button>
                </div>
                <div class="mt-3">
                  <div class="field">
                    <label>User ID</label>
                    <input id="new-admin-id" class="form-control" type="text" placeholder="firebase-user-id">
                  </div>
                  <button id="add-admin" class="btn btn-primary btn-sm">Добавить админа</button>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-sm align-middle">
                    <thead>
                      <tr>
                        <th>User ID</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="admins-table"></tbody>
                  </table>
                </div>
              </div>

              <div class="glass mt-4">
                <div class="d-flex justify-content-between align-items-center">
                  <h3 class="h5 fw-semibold mb-0">Клиентские ключи</h3>
                  <button id="refresh-keys" class="btn btn-ghost btn-sm">Обновить</button>
                </div>
                <div class="row g-3 mt-2">
                  <div class="col-md-6">
                    <label class="form-label">Client ID</label>
                    <input id="new-client-id" class="form-control" type="text" placeholder="client-1">
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Статус</label>
                    <select id="new-status" class="form-select">
                      <option value="active" selected>active</option>
                      <option value="suspended">suspended</option>
                    </select>
                  </div>
                </div>
                <div class="mt-3 d-flex gap-2 flex-wrap">
                  <button id="create-key" class="btn btn-primary btn-sm">Создать ключ</button>
                  <div id="create-key-message" class="text-muted"></div>
                </div>
                <div class="table-responsive mt-3">
                  <table class="table table-sm align-middle">
                    <thead>
                      <tr>
                        <th>Key Hash</th>
                        <th>Client ID</th>
                        <th>Статус</th>
                        <th>Создан</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="keys-table"></tbody>
                  </table>
                </div>
              </div>

              <div id="admin-message" class="mt-3 text-muted"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script src="/assets/admin.js"></script>
</body>
</html>

